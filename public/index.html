<!DOCTYPE html>
<html>
<head>
<title>Title of the document</title>
<script type="text/javascript" src="js/sabretooth.min.js"></script>
 <link rel="stylesheet" type="text/css" href="css/styles.css" />
</head>

<body>
    <div id="slideshow-control">
        <select id="slideshow-bundle-selector">
        </select>
        
    </div>
    <div id="slideshow-presenter">
        <img id="slideshow-current-image" src="/api/defaults/placeholder">
    </div>
</body>

<script>
    $(document).ready(function(){
            
        // populate the slideshow combo.
        $.ajax({url: "/api/bundles", success: function(data){
            var bundles = JSON.parse(data);

            for(var i=0; i<=bundles.length-1; i++) {
                var bundleName = bundles[i];
                console.log(bundleName);
                
                $("#slideshow-bundle-selector")
                    .append($('<option>', {"value": bundleName, 
                                           "text": bundleName}));
            }
        }});
        
        // load first image on combo change
        $("#slideshow-bundle-selector").change(function(c){
            var bundle_name = $("#slideshow-bundle-selector").val();
            console.log(bundle_name);

            $.ajax({url: "/api/bundles/" + bundle_name , success: function(data){
                var bundle_items = JSON.parse(data);
                
                // grab the first image and push to the image.
                if(bundle_items.length > 0) {
                    $("#slideshow-current-image")
                      .attr('src', "/api/bundles/" + bundle_name + "/" + bundle_items[0]);
                }
            }}) // #slideshow-bundle-selector.change
        }) 

    }) // document.onready
</script>

</html>